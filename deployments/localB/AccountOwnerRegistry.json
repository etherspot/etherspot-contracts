{
  "address": "0xf873E70f4ad2b0adf3Dc19B3f85f98215C180132",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "account",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "AccountOwnerAdded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "account",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "AccountOwnerRemoved",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "addAccountOwner",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "removeAccountOwner",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "verifyAccountOwner",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "blockNumber",
          "type": "uint256"
        }
      ],
      "name": "verifyAccountOwnerAtBlock",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x3c5babfbb45c6645702ca5f4bb89631dd7a0a82090898677990e069233d5991a",
  "receipt": {
    "to": null,
    "from": "0xae32631bdbb2474CC11594268427A2da3D6aBd6B",
    "contractAddress": "0xf873E70f4ad2b0adf3Dc19B3f85f98215C180132",
    "transactionIndex": 0,
    "gasUsed": "246164",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x67318730fec711d716e4501f84eb1238ff7911b7ffb2824f03ecb24a2dccfa7c",
    "transactionHash": "0x3c5babfbb45c6645702ca5f4bb89631dd7a0a82090898677990e069233d5991a",
    "logs": [],
    "blockNumber": 44,
    "cumulativeGasUsed": "246164",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "solcInputHash": "d3df566cd311e2cad327d1b461b99b1b",
  "metadata": "{\"compiler\":{\"version\":\"0.6.12+commit.27d51765\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"AccountOwnerAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"AccountOwnerRemoved\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"addAccountOwner\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"removeAccountOwner\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"verifyAccountOwner\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"blockNumber\",\"type\":\"uint256\"}],\"name\":\"verifyAccountOwnerAtBlock\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"title\":\"AccountOwnerRegistry\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/account/AccountOwnerRegistry.sol\":\"AccountOwnerRegistry\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"src/account/AccountOwnerRegistry.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.6.0;\\n\\nimport \\\"../common/libs/BlockLib.sol\\\";\\n\\n\\n/**\\n * @title AccountOwnerRegistry\\n */\\ncontract AccountOwnerRegistry {\\n  using BlockLib for BlockLib.BlockRelated;\\n\\n  mapping(address => mapping(address => BlockLib.BlockRelated)) private accountOwners;\\n\\n  // events\\n\\n  event AccountOwnerAdded(\\n    address account,\\n    address owner\\n  );\\n\\n  event AccountOwnerRemoved(\\n    address account,\\n    address owner\\n  );\\n\\n  // external functions\\n\\n  function addAccountOwner(\\n    address owner\\n  )\\n    external\\n  {\\n    require(\\n      !accountOwners[msg.sender][owner].verifyAtCurrentBlock()\\n    );\\n\\n    accountOwners[msg.sender][owner].added = true;\\n    accountOwners[msg.sender][owner].removedAtBlockNumber = 0;\\n\\n    emit AccountOwnerAdded(\\n      msg.sender,\\n      owner\\n    );\\n  }\\n\\n  function removeAccountOwner(\\n    address owner\\n  )\\n    external\\n  {\\n    require(\\n      accountOwners[msg.sender][owner].verifyAtCurrentBlock()\\n    );\\n\\n    accountOwners[msg.sender][owner].removedAtBlockNumber = block.number;\\n\\n    emit AccountOwnerRemoved(\\n      msg.sender,\\n      owner\\n    );\\n  }\\n\\n  // external functions (views)\\n\\n  function verifyAccountOwner(\\n    address account,\\n    address owner\\n  )\\n    external\\n    view\\n    returns (bool)\\n  {\\n    return accountOwners[account][owner].verifyAtCurrentBlock();\\n  }\\n\\n  function verifyAccountOwnerAtBlock(\\n    address account,\\n    address owner,\\n    uint256 blockNumber\\n  )\\n    external\\n    view\\n    returns (bool)\\n  {\\n    return accountOwners[account][owner].verifyAtBlock(blockNumber);\\n  }\\n}\\n\",\"keccak256\":\"0x4743737568306a942c7ae516f399de98c461be9276a0a2aabc46a195b96487f4\",\"license\":\"MIT\"},\"src/common/libs/BlockLib.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.6.0;\\n\\n/**\\n * @title BlockLib\\n */\\nlibrary BlockLib {\\n  struct BlockRelated {\\n    bool added;\\n    uint256 removedAtBlockNumber;\\n  }\\n\\n  function verifyAtCurrentBlock(\\n    BlockRelated memory self\\n  )\\n    internal\\n    view\\n    returns (bool)\\n  {\\n    return verifyAtBlock(self, block.number);\\n  }\\n\\n  function verifyAtAnyBlock(\\n    BlockRelated memory self\\n  )\\n    internal\\n    pure\\n    returns (bool)\\n  {\\n    return verifyAtBlock(self, 0);\\n  }\\n\\n  function verifyAtBlock(\\n    BlockRelated memory self,\\n    uint256 blockNumber\\n  )\\n    internal\\n    pure\\n    returns (bool)\\n  {\\n    bool result = false;\\n\\n    if (self.added) {\\n      if (self.removedAtBlockNumber == 0) {\\n        result = true;\\n      } else if (blockNumber == 0) {\\n        result = true;\\n      } else {\\n        result = self.removedAtBlockNumber > blockNumber;\\n      }\\n    }\\n\\n    return result;\\n  }\\n}\\n\",\"keccak256\":\"0x152b840d2876cd9e0cdef42ec4faaa7ecd1562b290f35c59cad584feb129166b\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b5061037d806100206000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c806334d323a4146100515780638ecc13651461009b578063bb890d3f146100c3578063e278cfc6146100f1575b600080fd5b6100876004803603606081101561006757600080fd5b506001600160a01b03813581169160208101359091169060400135610117565b604080519115158252519081900360200190f35b6100c1600480360360208110156100b157600080fd5b50356001600160a01b0316610168565b005b610087600480360360408110156100d957600080fd5b506001600160a01b0381358116916020013516610226565b6100c16004803603602081101561010757600080fd5b50356001600160a01b0316610275565b6001600160a01b0380841660009081526020818152604080832093861683529281528282208351808501909452805460ff16151584526001015490830152906101609083610328565b949350505050565b336000908152602081815260408083206001600160a01b03851684528252918290208251808401909352805460ff161515835260010154908201526101ac9061035e565b156101b657600080fd5b336000818152602081815260408083206001600160a01b038616808552908352818420805460ff191660019081178255019390935580519384529083019190915280517f27e282f7712c5b4617277759c834b86d163dfc1aad25c8c3c5926a1c9e5644689281900390910190a150565b6001600160a01b0380831660009081526020818152604080832093851683529281528282208351808501909452805460ff161515845260010154908301529061026e9061035e565b9392505050565b336000908152602081815260408083206001600160a01b03851684528252918290208251808401909352805460ff161515835260010154908201526102b99061035e565b6102c257600080fd5b336000818152602081815260408083206001600160a01b038616808552908352928190204360019091015580519384529083019190915280517f1ce3cbbc43ee231e5b950332f2b0b9dd7d349291a3ee411ce5c5c7ed745661bb9281900390910190a150565b815160009081901561026e5760208401516103455750600161026e565b826103525750600161026e565b50506020909101511190565b600061036a8243610328565b9291505056fea164736f6c634300060c000a",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061004c5760003560e01c806334d323a4146100515780638ecc13651461009b578063bb890d3f146100c3578063e278cfc6146100f1575b600080fd5b6100876004803603606081101561006757600080fd5b506001600160a01b03813581169160208101359091169060400135610117565b604080519115158252519081900360200190f35b6100c1600480360360208110156100b157600080fd5b50356001600160a01b0316610168565b005b610087600480360360408110156100d957600080fd5b506001600160a01b0381358116916020013516610226565b6100c16004803603602081101561010757600080fd5b50356001600160a01b0316610275565b6001600160a01b0380841660009081526020818152604080832093861683529281528282208351808501909452805460ff16151584526001015490830152906101609083610328565b949350505050565b336000908152602081815260408083206001600160a01b03851684528252918290208251808401909352805460ff161515835260010154908201526101ac9061035e565b156101b657600080fd5b336000818152602081815260408083206001600160a01b038616808552908352818420805460ff191660019081178255019390935580519384529083019190915280517f27e282f7712c5b4617277759c834b86d163dfc1aad25c8c3c5926a1c9e5644689281900390910190a150565b6001600160a01b0380831660009081526020818152604080832093851683529281528282208351808501909452805460ff161515845260010154908301529061026e9061035e565b9392505050565b336000908152602081815260408083206001600160a01b03851684528252918290208251808401909352805460ff161515835260010154908201526102b99061035e565b6102c257600080fd5b336000818152602081815260408083206001600160a01b038616808552908352928190204360019091015580519384529083019190915280517f1ce3cbbc43ee231e5b950332f2b0b9dd7d349291a3ee411ce5c5c7ed745661bb9281900390910190a150565b815160009081901561026e5760208401516103455750600161026e565b826103525750600161026e565b50506020909101511190565b600061036a8243610328565b9291505056fea164736f6c634300060c000a",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "title": "AccountOwnerRegistry",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 12,
        "contract": "src/account/AccountOwnerRegistry.sol:AccountOwnerRegistry",
        "label": "accountOwners",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_address,t_mapping(t_address,t_struct(BlockRelated)700_storage))"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_mapping(t_address,t_mapping(t_address,t_struct(BlockRelated)700_storage))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(address => struct BlockLib.BlockRelated))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_address,t_struct(BlockRelated)700_storage)"
      },
      "t_mapping(t_address,t_struct(BlockRelated)700_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => struct BlockLib.BlockRelated)",
        "numberOfBytes": "32",
        "value": "t_struct(BlockRelated)700_storage"
      },
      "t_struct(BlockRelated)700_storage": {
        "encoding": "inplace",
        "label": "struct BlockLib.BlockRelated",
        "members": [
          {
            "astId": 697,
            "contract": "src/account/AccountOwnerRegistry.sol:AccountOwnerRegistry",
            "label": "added",
            "offset": 0,
            "slot": "0",
            "type": "t_bool"
          },
          {
            "astId": 699,
            "contract": "src/account/AccountOwnerRegistry.sol:AccountOwnerRegistry",
            "label": "removedAtBlockNumber",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "64"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}